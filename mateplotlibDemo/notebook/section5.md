# 2.5 直方图(histogram)

## 学习目标

- 目标
  - 应用hist实现直方图的绘制
  - 知道直方图图的应用场景

- 应用

   电影时长分布

- 内容预览

   - 2.5.1 直方图介绍
   - 2.5.2 直方图与柱状图的对比
   - 2.5.3 直方图绘制
   - 2.3.4 直方图的应用场景

## 2.5.1 直方图介绍

直方图，形状类似柱状图却有着与柱状图完全不同的含义。直方图牵涉统计学的概念，首先要对数据进行分组，然后统计每个分组内数据元的数量。 在坐标系中，横轴标出每个组的端点，纵轴表示频数，每个矩形的高代表对应的频数，称这样的统计图为频数分布直方图。

示例：

某校初三（1）班36位同学的身高的频数分布直方图如下图所示：

![](http://mafei001.xydn.fun/%E5%88%9D%E4%B8%AD%E7%9B%B4%E6%96%B9%E5%9B%BE.png) 

（1）身高在哪一组的同学最多？ 

（2）身高在160.5cm以上的同学有多少人？ 

### 相关概念：

- 组数：在统计数据时，我们把数据按照不同的范围分成几个组，分成的组的个数称为组数
- 组距：每一组两个端点的差

## 2.5.2 直方图与柱状图的对比

![](http://mafei001.xydn.fun/%E7%9B%B4%E6%96%B9%E5%9B%BE%E4%B8%8E%E6%9F%B1%E7%8A%B6%E5%9B%BE%E5%AF%B9%E6%AF%94.jpeg)

- 柱状图是以矩形的长度表示每一组的频数或数量，其宽度(表示类别)则是固定的，**利于较小的数据集分析**。

- 直方图描述的是一组数据的频次分布，是以矩形的长度表示每一组的频数或数量，宽度则表示各组的组距，因此其高度与宽度均有意义，利于**展示大量数据集的统计结果**。例如把年龄分成“0-5，5-10，……，80-85”17个组，统计一下中国人口年龄的分布情况。**直方图有助于我们知道数据的分布情况，诸如众数、中位数的大致位置、数据是否存在缺口或者异常值**。

  **1. 直方图展示数据的分布，柱状图比较数据的大小。**

  ​	这是直方图与柱状图**最根本的区别**。举个例子，有10个苹果，每个苹果重量不同。如果使用直方图，就展示了重量在0-10g的苹果有多少个，10-20g的苹果有多少个；如果使用柱状图，则展示每个苹果的具体重量。

  　　所以直方图展示的是一组数据中，在你划分的区间里，这些数据的**分布**情况，但是我们不知道在一个区间里，单个数据的具体大小。上图展现了游客在博物馆的游览时间，其中，将近40％的游客仅逗留了0-10分钟。但是我们无法知道这些游客中，每个人具体的游览时间是多少。![](http://mafei001.xydn.fun/%E6%B8%B8%E5%AE%A2%E6%B5%8F%E8%A7%88%E6%97%B6%E9%97%B4%E7%9B%B4%E6%96%B9%E5%9B%BE.jpeg)

  ​	而在柱状图里，我们能看到的是每个数据的大小，并且进行比较。下图就比较了在12次展览中，参观者参观时间的中位数，我们能够知道参观的具体用时。

  ![](http://mafei001.xydn.fun/%E6%B8%B8%E5%AE%A2%E6%B5%8F%E8%A7%88%E6%97%B6%E9%97%B4%E6%9F%B1%E7%8A%B6%E5%9B%BE.jpeg)

  **2. 直方图X轴为定量数据，柱状图X轴为分类数据。**

  ​	在直方图中，X轴上的变量是一个个连续的区间，这些区间通常表现为数字，例如代表苹果重量的“0-10g，10-20g……”，代表时间长度的“0-10min，10-20min……”。而在柱状图中，X轴上的变量是一个个分类数据，例如不同的国家名称、不同的游戏类型。

  ![](http://mafei001.xydn.fun/%E7%9B%B4%E6%96%B9%E5%9B%BE%E6%9F%B1%E7%8A%B6%E5%9B%BE%E5%AF%B9%E6%AF%942.png)

  ​	直方图上的每根柱子都是**不可移动的**，X轴上的区间是连续的、固定的。而柱状图上的每根柱子是可以随意排序的，有的情况下需要按照分类数据的名称排列，有的则需要按照数值的大小排列。

  **3. 直方图柱子无间隔，柱状图柱子有间隔**

  因为直方图中的区间是连续的，因此柱子之间**不存在间隙**。而柱状图的柱子之间是存在间隔。

  **4. 直方图柱子宽度可不一，柱状图柱子宽度须一致**

  ​	柱状图柱子的宽度因为没有数值含义，所以宽度必须一致。但是在直方图中，柱子的宽度代表了区间的长度，根据区间的不同，柱子的宽度可以不同，但理论上应为单位长度的倍数。

  　　例如，美国人口普查局（The U.S. Census Bureau）调查了12.4亿人的上班通勤时间，由于通勤时间在45-150分钟的人数太少，因此区间改为45-60分钟、60-90分钟、90-150分钟，其他组距则均为5。![](http://mafei001.xydn.fun/%E7%BB%84%E8%B7%9D%E4%B8%8D%E4%B8%80%E8%A1%A8%E6%A0%BC.png)

  　　可以看到，Y轴的数据为“人数/组距”，在这种情况下，每个柱子的面积相加就等于调查的总人数，柱子的面积就有了意义。![](http://mafei001.xydn.fun/%E7%BB%84%E8%B7%9D%E4%B8%8D%E4%B8%80%E5%9B%BE.png)

  ​	当上图的Y轴表达的是“区间人数/总人数/组距”，这个直方图就是我们初中学习的“频率分布直方图”，频率指的是“区间数量/总数量”。在这样的直方图中，所有柱子的面积相加就等于1啦。

  ![](http://mafei001.xydn.fun/%E7%9B%B4%E6%96%B9%E5%9B%BE.png)

## 2.5.3 直方图绘制

## 需求：电影时长分布状况

现有250部电影的时长，希望统计出这些电影时长的分布状态(比如时长为100分钟到120分钟电影的数量，出现的频率)等信息，你应该如何呈现这些数据？

数据：

```
time = [131,  98, 125, 131, 124, 139, 131, 117, 128, 108, 135, 138, 131, 102, 107, 114, 119, 128, 121, 142, 127, 130, 124, 101, 110, 116, 117, 110, 128, 128, 115,  99, 136, 126, 134,  95, 138, 117, 111,78, 132, 124, 113, 150, 110, 117,  86,  95, 144, 105, 126, 130,126, 130, 126, 116, 123, 106, 112, 138, 123,  86, 101,  99, 136,123, 117, 119, 105, 137, 123, 128, 125, 104, 109, 134, 125, 127,105, 120, 107, 129, 116, 108, 132, 103, 136, 118, 102, 120, 114,105, 115, 132, 145, 119, 121, 112, 139, 125, 138, 109, 132, 134,156, 106, 117, 127, 144, 139, 139, 119, 140,  83, 110, 102,123,107, 143, 115, 136, 118, 139, 123, 112, 118, 125, 109, 119, 133,112, 114, 122, 109, 106, 123, 116, 131, 127, 115, 118, 112, 135,115, 146, 137, 116, 103, 144,  83, 123, 111, 110, 111, 100, 154,136, 100, 118, 119, 133, 134, 106, 129, 126, 110, 111, 109, 141,120, 117, 106, 149, 122, 122, 110, 118, 127, 121, 114, 125, 126,114, 140, 103, 130, 141, 117, 106, 114, 121, 114, 133, 137,  92,121, 112, 146,  97, 137, 105,  98, 117, 112,  81,  97, 139, 113,134, 106, 144, 110, 137, 137, 111, 104, 117, 100, 111, 101, 110,105, 129, 137, 112, 120, 113, 133, 112,  83,  94, 146, 133, 101,131, 116, 111,  84, 137, 115, 122, 106, 144, 109, 123, 116, 111,111, 133, 150]
```

效果：

![电影时长分布](http://mafei001.xydn.fun/%E7%94%B5%E5%BD%B1%E6%97%B6%E9%95%BF%E5%88%86%E5%B8%83.png)

### 1 直方图绘制api

matplotlib.pyplot.hist(x, bins=None, normed=None, **kwargs)

```
Parameters:	
x : (n,) array or sequence of (n,) arrays

bins : integer or sequence or ‘auto’, optional
组数
```

### 2 绘制

* 设置组距
* 设置组数（通常对于数据较少的情况，分为5~12组，数据较多，更换图形显示方式）
  * 通常设置组数会有相应公式：组数 = 极差/组距= (max-min)/bins

代码：

```python
# 1）准备数据
time = [131,  98, 125, 131, 124, 139, 131, 117, 128, 108, 135, 138, 131, 102, 107, 114, 119, 128, 121, 142, 127, 130, 124, 101, 110, 116, 117, 110, 128, 128, 115,  99, 136, 126, 134,  95, 138, 117, 111,78, 132, 124, 113, 150, 110, 117,  86,  95, 144, 105, 126, 130,126, 130, 126, 116, 123, 106, 112, 138, 123,  86, 101,  99, 136,123, 117, 119, 105, 137, 123, 128, 125, 104, 109, 134, 125, 127,105, 120, 107, 129, 116, 108, 132, 103, 136, 118, 102, 120, 114,105, 115, 132, 145, 119, 121, 112, 139, 125, 138, 109, 132, 134,156, 106, 117, 127, 144, 139, 139, 119, 140,  83, 110, 102,123,107, 143, 115, 136, 118, 139, 123, 112, 118, 125, 109, 119, 133,112, 114, 122, 109, 106, 123, 116, 131, 127, 115, 118, 112, 135,115, 146, 137, 116, 103, 144,  83, 123, 111, 110, 111, 100, 154,136, 100, 118, 119, 133, 134, 106, 129, 126, 110, 111, 109, 141,120, 117, 106, 149, 122, 122, 110, 118, 127, 121, 114, 125, 126,114, 140, 103, 130, 141, 117, 106, 114, 121, 114, 133, 137,  92,121, 112, 146,  97, 137, 105,  98, 117, 112,  81,  97, 139, 113,134, 106, 144, 110, 137, 137, 111, 104, 117, 100, 111, 101, 110,105, 129, 137, 112, 120, 113, 133, 112,  83,  94, 146, 133, 101,131, 116, 111,  84, 137, 115, 122, 106, 144, 109, 123, 116, 111,111, 133, 150]

# 2）创建画布
plt.figure(figsize=(20, 8), dpi=100)

# 3）绘制直方图
# 设置组距
distance = 2
# 计算组数
group_num = int((max(time) - min(time)) / distance)
# 绘制直方图
plt.hist(time, bins=group_num)

# 修改x轴刻度显示
plt.xticks(range(min(time), max(time))[::2])

# 添加网格显示
plt.grid(linestyle="--", alpha=0.5)

# 添加x, y轴描述信息
plt.xlabel("电影时长大小")
plt.ylabel("电影的数据量")

# 4）显示图像
plt.show()
```

### 3 直方图注意点

**1. 注意组距**

​	组距会影响直方图呈现出来的数据分布，因此在绘制直方图的时候需要多次尝试改变组距。

![](http://mafei001.xydn.fun/%E7%BB%84%E8%B7%9D%E8%BE%83%E5%A4%A7.png)

![](http://mafei001.xydn.fun/%E7%BB%84%E8%B7%9D%E8%BE%83%E5%B0%8F.png)

**2. 注意Y轴所代表的变量**

​	Y轴上的变量可以是频次（数据出现了多少次）、频率（频次/总次数）、频率/组距，不同的变量会让直方图描述的数据分布意义不同。

## 2.3.4 直方图的应用场景

- 用于表示分布情况
- 通过直方图还可以观察和估计哪些数据比较集中，异常或者孤立的数据分布在何处

例如：用户年龄分布，商品价格分布